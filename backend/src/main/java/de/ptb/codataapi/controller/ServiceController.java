package de.ptb.codataapi.controller;

import com.fasterxml.jackson.databind.JsonNode;
import de.ptb.codataapi.dtos.ConstantDto;
import de.ptb.codataapi.dtos.FundamentalConstantDto;
import de.ptb.codataapi.model.*;
import de.ptb.codataapi.repository.FundamentalConstantRepository;
import de.ptb.codataapi.service.DccValidationServiceImpl;
import de.ptb.codataapi.service.FundamentalConstantService;
import de.ptb.codataapi.service.ParticipantService;
import jakarta.servlet.ServletOutputStream;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.xml.bind.DatatypeConverter;
import jakarta.xml.bind.JAXBContext;
import jakarta.xml.bind.JAXBException;
import jakarta.xml.bind.Marshaller;
import lombok.AllArgsConstructor;
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;
import java.io.*;
import java.nio.file.Files;
import java.util.*;


@RestController
@AllArgsConstructor
@RequestMapping(path = "/api")
//@CrossOrigin(origins = "http://localhost:57954")
public class ServiceController {
    private FundamentalConstantService fundamentalConstantService;
    private FundamentalConstantRepository fundamentalConstantRepository;
    private ParticipantService participantService;
    List<siReal> siReals;
    private DccValidationServiceImpl dccService;
    private static final  String VALID_DCC="PTB-DCC-4711";
    @GetMapping(value = "dccValidation/{dccPid}", produces = {MediaType.APPLICATION_JSON_VALUE})
    public ResponseEntity<Object> getDPPByDcc(@PathVariable  String dccPid) {
        return  ResponseEntity.status(HttpStatus.OK).body(Collections.singletonMap("valid_dcc",dccService.validate(dccPid,VALID_DCC)));
    }
//    @GetMapping(value = "/constantXml", produces = MediaType.APPLICATION_XML_VALUE)
//    public List<FundamentalConstantDto> constantXml() {
//        return getConstantData();
//    }
//
//    @GetMapping(value = "/constantJson", produces = MediaType.APPLICATION_JSON_VALUE)
//    public List<FundamentalConstantDto> constantJson() {
//        return getConstantData();
//    }

    @GetMapping(value = "/d-constant" , produces = MediaType.APPLICATION_JSON_VALUE)
    public List<FundamentalConstant> getFundamentalConstants() {
        return fundamentalConstantRepository.findAll();
//        return fundamentalConstantService.getFundamentalConstantData();
    }

    @GetMapping(value = "d-constant/{pid}", produces = MediaType.APPLICATION_JSON_VALUE)
    public List<FundamentalConstantDto> getFundamentalConstantsByPid(@PathVariable String pid) {
        return fundamentalConstantService.getFundamentalConstantsByPid(pid);
    }

    //    @GetMapping(value = "/d-constantXml" )
//    public String getFundamentalConstantsXml() {
//        return fundamentalConstantRepository.findAll().toString();
////        return fundamentalConstantService.getFundamentalConstantData();
//    }
//    @GetMapping(value = "/xml/d-constant/{pid}", produces = MediaType.APPLICATION_XML_VALUE)
//    public List<FundamentalConstantDto> getFundamentalConstantsXmlByPid(@PathVariable String pid) {
//        return fundamentalConstantService.getFundamentalConstantsByPid(pid);
//    }
    @GetMapping(value = "/participants")
    public ResponseEntity<List<Participant>> getParticipants() {
        return new ResponseEntity<>(participantService.getParticipantList(),HttpStatus.OK) ;
    }
    @PostMapping (value = "/addParticipant")
    public ResponseEntity<Participant> addParticipant(@RequestBody Participant participant) {
        return new ResponseEntity<>( participantService.addParticipant(participant),HttpStatus.CREATED);
    }
    @DeleteMapping("/delete/{id}")
    public ResponseEntity<Long> delete(@PathVariable("id") Long id) {
        participantService.delete(Math.toIntExact(id));
        return new ResponseEntity<>(HttpStatus.OK);
    }
    @DeleteMapping("/deleteAll")
    public ResponseEntity<Long> deleteAll() {
        participantService.deleteAll();
        return new ResponseEntity<>(HttpStatus.OK);
    }
    @GetMapping (value = "/report")
    public List<Report> getReport() {
      Report r=new Report();
//      String repid=participantService.getReport().getPidReport();
        List<Report> reportsList= participantService.getReportList();
//        List<Participant> participantList= participantService.getParticipantList();
//       r.setPidReport("CCM-KC1");
//        r.setParticipantList(participantList);
        return reportsList;
    }
    @GetMapping (value = "/reports")
    public List<Report> getReports() {
        return participantService.getReportList();
    }

    @PostMapping (value = "/addReport")
    public Report addReport(@RequestBody Report report) {
        return participantService.addReport(report);
    }
    @GetMapping("/decodeToFile")
    public void decodeToXml(){
        String base64 ="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCg0KPGRjYzpkaWdpdGFsQ2FsaWJyYXRpb25DZXJ0aWZpY2F0ZQ0KICAgICAgICB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIg0KICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHBzOi8vcHRiLmRlL2RjYyBodHRwczovL3B0Yi5kZS9kY2MvdjMuMC4wL2RjYy54c2QiDQogICAgICAgIHhtbG5zOmRjYz0iaHR0cHM6Ly9wdGIuZGUvZGNjIg0KICAgICAgICB4bWxuczpzaT0iaHR0cHM6Ly9wdGIuZGUvc2kiIHNjaGVtYVZlcnNpb249IjMuMC4wIj4NCg0KICAgIDwhLS1EaWVzIGlzdCBlaW4gQmVpc3BpZWwgZsO8ciBlaW4gZWluemVsbmVzIEdld2ljaHRzc3TDvGNrLiBEYXMgQmVpc3BpZWwgd3VyZGUgaW0gREtELUZBIE1hc3NlIHVuZCBXYWFnZW4gZXJzdGVsbHQuDQogICAgVmVyc2lvbiBkZXMgQmVpc3BpZWxzOiBWMS4zICwgRGF0dW06IDE5LjA0LjIwMjIgICAtLT4NCg0KICAgIDxkY2M6YWRtaW5pc3RyYXRpdmVEYXRhPg0KICAgICAgICA8ZGNjOmRjY1NvZnR3YXJlPg0KICAgICAgICAgICAgPGRjYzpzb2Z0d2FyZT4NCiAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5DSVBNIGtleSBjb21wYXJpc29uIG9mIG1hc3MgbWVhc3VyZW1lbnRzIG9mIGEgc2lsaWNvbiBzcGhlcmU8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgPGRjYzpyZWxlYXNlPjIwMTkuMS4zPC9kY2M6cmVsZWFzZT4NCiAgICAgICAgICAgIDwvZGNjOnNvZnR3YXJlPg0KICAgICAgICA8L2RjYzpkY2NTb2Z0d2FyZT4NCg0KICAgICAgICA8ZGNjOmNvcmVEYXRhPg0KICAgICAgICAgICAgPGRjYzpjb3VudHJ5Q29kZUlTTzMxNjZfMT5ERTwvZGNjOmNvdW50cnlDb2RlSVNPMzE2Nl8xPg0KICAgICAgICAgICAgPGRjYzp1c2VkTGFuZ0NvZGVJU082MzlfMT5kZTwvZGNjOnVzZWRMYW5nQ29kZUlTTzYzOV8xPg0KICAgICAgICAgICAgPGRjYzp1c2VkTGFuZ0NvZGVJU082MzlfMT5lbjwvZGNjOnVzZWRMYW5nQ29kZUlTTzYzOV8xPg0KICAgICAgICAgICAgPGRjYzptYW5kYXRvcnlMYW5nQ29kZUlTTzYzOV8xPmRlPC9kY2M6bWFuZGF0b3J5TGFuZ0NvZGVJU082MzlfMT4NCiAgICAgICAgICAgIDxkY2M6dW5pcXVlSWRlbnRpZmllcj5DQ00tSzEtTTwvZGNjOnVuaXF1ZUlkZW50aWZpZXI+DQogICAgICAgICAgICA8ZGNjOmlkZW50aWZpY2F0aW9ucz4NCiAgICAgICAgICAgICAgICA8ZGNjOmlkZW50aWZpY2F0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmlzc3Vlcj5jYWxpYnJhdGlvbkxhYm9yYXRvcnk8L2RjYzppc3N1ZXI+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6dmFsdWU+NDM3MDAwMTExPC9kY2M6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+U0FQLU51bW1lcjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPlNBUC1OdW1iZXI8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgIDwvZGNjOmlkZW50aWZpY2F0aW9uPg0KICAgICAgICAgICAgICAgIDxkY2M6aWRlbnRpZmljYXRpb24+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6aXNzdWVyPmNhbGlicmF0aW9uTGFib3JhdG9yeTwvZGNjOmlzc3Vlcj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzp2YWx1ZT4wNi4wMi4wMyMwMDAxPC9kY2M6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+QWt0ZW5udW1tZXI8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5GaWxlIG51bWJlcjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgPC9kY2M6aWRlbnRpZmljYXRpb24+DQogICAgICAgICAgICA8L2RjYzppZGVudGlmaWNhdGlvbnM+DQogICAgICAgICAgICA8ZGNjOmJlZ2luUGVyZm9ybWFuY2VEYXRlPjIwMjEtMDYtMDE8L2RjYzpiZWdpblBlcmZvcm1hbmNlRGF0ZT4NCiAgICAgICAgICAgIDxkY2M6ZW5kUGVyZm9ybWFuY2VEYXRlPjIwMjEtMDYtMDI8L2RjYzplbmRQZXJmb3JtYW5jZURhdGU+DQogICAgICAgICAgICA8ZGNjOnBlcmZvcm1hbmNlTG9jYXRpb24+TlBMPC9kY2M6cGVyZm9ybWFuY2VMb2NhdGlvbj4NCiAgICAgICAgPC9kY2M6Y29yZURhdGE+DQoNCiAgICAgICAgPGRjYzppdGVtcz4NCiAgICAgICAgICAgIDxkY2M6aXRlbSBpZD0id2VpZ2h0QUJDMTIzNCI+DQogICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPjIga2c8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPjIga2c8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgPGRjYzplcXVpcG1lbnRDbGFzcz4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpyZWZlcmVuY2U+T0lNTCBSMTExLTE6MjAwNDwvZGNjOnJlZmVyZW5jZT4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjbGFzc0lEPkUyPC9kY2M6Y2xhc3NJRD4NCiAgICAgICAgICAgICAgICA8L2RjYzplcXVpcG1lbnRDbGFzcz4NCiAgICAgICAgICAgICAgICA8ZGNjOmRlc2NyaXB0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkJlc2NocmVpYnVuZyBkZXIgVmVycGFja3VuZyAob3B0aW9uYWwpPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5EZXNjcmlwdGlvbiBvZiBib3gvY2FzZSAob3B0aW9uYWwpPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICA8L2RjYzpkZXNjcmlwdGlvbj4NCiAgICAgICAgICAgICAgICA8ZGNjOm1hbnVmYWN0dXJlcj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50PldlaWdodHMgQ28gTHRkLjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgPC9kY2M6bWFudWZhY3R1cmVyPg0KICAgICAgICAgICAgICAgIDxkY2M6aWRlbnRpZmljYXRpb25zPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmlkZW50aWZpY2F0aW9uIHJlZlR5cGU9Im1hbnVmYWN0b3JpbmdEYXRlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6aXNzdWVyPm1hbnVmYWN0dXJlcjwvZGNjOmlzc3Vlcj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dmFsdWU+VVRDIDIwMjAtMDEtMDEgMTk6MzU6NTA8L2RjYzp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkhlcnN0ZWxsdW5nc2RhdHVtPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPk1hbnVmYWN0dXJpbmcgRGF0ZTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzppZGVudGlmaWNhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzppZGVudGlmaWNhdGlvbiByZWZUeXBlPSJzZXRQb3NpdGlvbiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmlzc3Vlcj5vd25lcjwvZGNjOmlzc3Vlcj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dmFsdWU+QUJDMTIzNDwvZGNjOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+SW50ZXJuZSBOdW1tZXIgZGVyIEVsZW1lbnRwb3NpdGlvbjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5JbnRlcm5hbCBudW1iZXIgb2YgdGhlIGVsZW1lbnQgcG9zaXRpb248L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6aWRlbnRpZmljYXRpb24+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6aWRlbnRpZmljYXRpb24gcmVmVHlwZT0ib2JqZWN0SWQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzppc3N1ZXI+b3duZXI8L2RjYzppc3N1ZXI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnZhbHVlPlhZWjQ1Njc8L2RjYzp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkRhdGVuYmFua251bW1lciBkZXMgR2V3aWNodHM8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+RGF0YWJhc2UgbnVtYmVyIG9mIHRoZSB3ZWlnaHQ8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6aWRlbnRpZmljYXRpb24+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6aWRlbnRpZmljYXRpb24gcmVmVHlwZT0ic2hhcGUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzppc3N1ZXI+bWFudWZhY3R1cmVyPC9kY2M6aXNzdWVyPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzp2YWx1ZT5Lbm9iIHdlaWdodDwvZGNjOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+Rm9ybTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5Gb3JtPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOmlkZW50aWZpY2F0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmlkZW50aWZpY2F0aW9uIHJlZlR5cGU9Im1hdGVyaWFsIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6aXNzdWVyPm1hbnVmYWN0dXJlcjwvZGNjOmlzc3Vlcj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dmFsdWU+U3RhaW5sZXNzIFN0ZWVsPC9kY2M6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5NYXRlcmlhbDwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5NYXRlcmlhbDwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzppZGVudGlmaWNhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzppZGVudGlmaWNhdGlvbiByZWZUeXBlPSJkaWZmZXJlbnRpYXRvciI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmlzc3Vlcj5tYW51ZmFjdHVyZXI8L2RjYzppc3N1ZXI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnZhbHVlPio8L2RjYzp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPlp1c2F0emluZGVudGlmaWthdGlvbjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5BZGRpdGlvbmFsIGlkZW50aWZpY2F0aW9uPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOmlkZW50aWZpY2F0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmlkZW50aWZpY2F0aW9uIHJlZlR5cGU9InVzZXJNYXJraW5nMSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmlzc3Vlcj5vd25lcjwvZGNjOmlzc3Vlcj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dmFsdWU+MzIxPC9kY2M6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5OdXR6ZXJtYXJraWVydW5nIDE8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+VXNlciBtYXJraW5nIDE8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6aWRlbnRpZmljYXRpb24+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6aWRlbnRpZmljYXRpb24gcmVmVHlwZT0idXNlck1hcmtpbmcyIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6aXNzdWVyPm93bmVyPC9kY2M6aXNzdWVyPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzp2YWx1ZT5DQkE8L2RjYzp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPk51dHplcm1hcmtpZXJ1bmcgMjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5Vc2VyIG1hcmtpbmcgMjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzppZGVudGlmaWNhdGlvbj4NCiAgICAgICAgICAgICAgICA8L2RjYzppZGVudGlmaWNhdGlvbnM+DQogICAgICAgICAgICA8L2RjYzppdGVtPg0KICAgICAgICA8L2RjYzppdGVtcz4NCg0KICAgICAgICA8ZGNjOmNhbGlicmF0aW9uTGFib3JhdG9yeT4NCiAgICAgICAgICAgIDxkY2M6Y29udGFjdD4NCiAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5QaHlzaWthbGlzY2gtVGVjaG5pc2NoZSBCdW5kZXNhbnN0YWx0IChQVEIpPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgIDxkY2M6ZU1haWw+aW5mb0BwdGIuZGU8L2RjYzplTWFpbD4NCiAgICAgICAgICAgICAgICA8ZGNjOmxvY2F0aW9uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmZ1cnRoZXIgaWQ9Inp1c2F0eiI+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkFidGVpbHVuZyAxIE1lY2hhbmlrIHVuZCBBa3VzdGlrPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+RGl2aXNpb24gMSBNZWNoYW5pY3MgYW5kIEFjb3VzdGljczwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOmZ1cnRoZXI+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6c3RyZWV0PkJ1bmRlc2FsbGVlPC9kY2M6c3RyZWV0Pg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOnN0cmVldE5vPjEwMDwvZGNjOnN0cmVldE5vPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOnBvc3RDb2RlPjM4MTE2PC9kY2M6cG9zdENvZGU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y2l0eT5CcmF1bnNjaHdlaWc8L2RjYzpjaXR5Pg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvdW50cnlDb2RlPkRFPC9kY2M6Y291bnRyeUNvZGU+DQogICAgICAgICAgICAgICAgPC9kY2M6bG9jYXRpb24+DQogICAgICAgICAgICA8L2RjYzpjb250YWN0Pg0KICAgICAgICA8L2RjYzpjYWxpYnJhdGlvbkxhYm9yYXRvcnk+DQoNCiAgICAgICAgPGRjYzpyZXNwUGVyc29ucz4NCiAgICAgICAgICAgIDxkY2M6cmVzcFBlcnNvbj4NCiAgICAgICAgICAgICAgICA8ZGNjOnBlcnNvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50Pk1pY2hhZWw8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmVNYWlsPmluZm9AcHRiLmRlPC9kY2M6ZU1haWw+DQogICAgICAgICAgICAgICAgPC9kY2M6cGVyc29uPg0KICAgICAgICAgICAgICAgIDxkY2M6cm9sZT5hdXRob3Jpc2F0aW9uIG9mIGNlcnRpZmljYXRldHJ1ZTwvZGNjOnJvbGU+DQogICAgICAgICAgICA8L2RjYzpyZXNwUGVyc29uPg0KICAgICAgICAgICAgPGRjYzpyZXNwUGVyc29uPg0KICAgICAgICAgICAgICAgIDxkY2M6cGVyc29uPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+QWxleGFuZGVyPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzplTWFpbD5pbmZvQHB0Yi5kZTwvZGNjOmVNYWlsPg0KICAgICAgICAgICAgICAgIDwvZGNjOnBlcnNvbj4NCiAgICAgICAgICAgIDwvZGNjOnJlc3BQZXJzb24+DQogICAgICAgIDwvZGNjOnJlc3BQZXJzb25zPg0KDQogICAgICAgIDxkY2M6Y3VzdG9tZXI+DQogICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgPGRjYzpjb250ZW50PkN1c3RvbWVyPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICA8ZGNjOmVNYWlsPmluZm9AcHRiLmRlPC9kY2M6ZU1haWw+DQogICAgICAgICAgICA8ZGNjOmxvY2F0aW9uPg0KICAgICAgICAgICAgICAgIDxkY2M6c3RyZWV0Tm8+NjwvZGNjOnN0cmVldE5vPg0KICAgICAgICAgICAgICAgIDxkY2M6c3RyZWV0PkhlbGxvIFN0cmVldDwvZGNjOnN0cmVldD4NCiAgICAgICAgICAgICAgICA8ZGNjOnBvc3RDb2RlPjEwPC9kY2M6cG9zdENvZGU+DQogICAgICAgICAgICAgICAgPGRjYzpjaXR5PkJyYXVuc2Nod2VpZzwvZGNjOmNpdHk+DQogICAgICAgICAgICAgICAgPGRjYzpjb3VudHJ5Q29kZT5ERTwvZGNjOmNvdW50cnlDb2RlPg0KICAgICAgICAgICAgPC9kY2M6bG9jYXRpb24+DQogICAgICAgIDwvZGNjOmN1c3RvbWVyPg0KDQogICAgICAgIDxkY2M6c3RhdGVtZW50cz4NCg0KICAgICAgICAgICAgPGRjYzpzdGF0ZW1lbnQ+DQogICAgICAgICAgICAgICAgPGRjYzpub3JtPkRJTiBFTiBJU08vSUVDIDE3MDI1OjIwMTgtMDM8L2RjYzpub3JtPg0KICAgICAgICAgICAgICAgIDxkY2M6cmVmZXJlbmNlPjcuOC4yLjEgbCk8L2RjYzpyZWZlcmVuY2U+DQogICAgICAgICAgICAgICAgPGRjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5EaWUgRXJnZWJuaXNzZSBiZXppZWhlbiBzaWNoIG51ciBhdWYgZGVuIGluIGRpZXNlbSBEQ0MgYmVzY2hyaWViZW5lbiBHZWdlbnN0YW5kLjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+VGhlIHJlc3VsdHMgcmVmZXIgb25seSB0byB0aGUgb2JqZWN0IGNhbGlicmF0ZWQgaW4gdGhpcyBEQ0MuPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICA8L2RjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgIDwvZGNjOnN0YXRlbWVudD4NCg0KICAgICAgICAgICAgPGRjYzpzdGF0ZW1lbnQgcmVmVHlwZT0iaXNJbkNNQyI+DQogICAgICAgICAgICAgICAgPGRjYzpyZWZlcmVuY2U+RC1LLXh4eHh4LXl5LXp6PC9kY2M6cmVmZXJlbmNlPg0KICAgICAgICAgICAgICAgIDxkY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+RGllc2VyIFdlcnQgaXN0IGlubmVyaGFsYiBkZXIgS2FsaWJyaWVyLSB1bmQgTWVzc23DtmdsaWNoa2VpdGVuLjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+VGhpcyByZXN1bHQgaXMgd2l0aGluIHRoZSBjYWxpYnJhdGlvbiBhbmQgbWVhc3VyZW1lbnQgY2FwYWJpbGl0aWVzLjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgPC9kY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgPGRjYzp2YWxpZD50cnVlPC9kY2M6dmFsaWQ+DQogICAgICAgICAgICAgICAgPGRjYzpyZXNwQXV0aG9yaXR5Pg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+REFra1M8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmVNYWlsPmluZm9AZGFra3MuZGU8L2RjYzplTWFpbD4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpsb2NhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y2l0eT5CcmF1bnNjaHdlaWc8L2RjYzpjaXR5Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpsb2NhdGlvbj4NCiAgICAgICAgICAgICAgICA8L2RjYzpyZXNwQXV0aG9yaXR5Pg0KICAgICAgICAgICAgPC9kY2M6c3RhdGVtZW50Pg0KDQogICAgICAgICAgICA8ZGNjOnN0YXRlbWVudD4NCiAgICAgICAgICAgICAgICA8ZGNjOmNvbnZlbnRpb24+VHJhY2ViaWxpdHk8L2RjYzpjb252ZW50aW9uPg0KICAgICAgICAgICAgICAgIDxkY2M6dHJhY2VhYmxlPnRydWU8L2RjYzp0cmFjZWFibGU+DQogICAgICAgICAgICAgICAgPGRjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5EaWUgTWVzc3VuZyBpc3QgYXVmIGRhcyBTSSByw7xja2bDvGhyYmFyLjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+VGhlIG1lYXN1cmVtZW50IGlzIHRyYWNlYWJsZSB0byB0aGUgU0kuPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICA8L2RjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgIDwvZGNjOnN0YXRlbWVudD4NCg0KICAgICAgICAgICAgPGRjYzpzdGF0ZW1lbnQ+DQogICAgICAgICAgICAgICAgPGRjYzpub3JtPkRJTiBFTiBJU08vSUVDIDE3MDI1OjIwMTgtMDM8L2RjYzpub3JtPg0KICAgICAgICAgICAgICAgIDxkY2M6cmVmZXJlbmNlPjcuOC40LjM8L2RjYzpyZWZlcmVuY2U+DQogICAgICAgICAgICAgICAgPGRjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5EaWUgRXJnZWJuaXNzZSBnZWx0ZW4genVtIFplaXRwdW5rdCBkZXIgS2FsaWJyaWVydW5nLiBFcyBvYmxpZWd0IGRlbSBWZXJ3ZW5kZXIsIHp1IGdlZ2ViZW5lciBaZWl0IGVpbmUgUmVrYWxpYnJpZXJ1bmcgenUgdmVyYW5sYXNzZW4uPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5UaGUgcmVzdWx0cyByZWZlciBvbmx5IHRvIHRoZSBvYmplY3QgY2FsaWJyYXRlZCBpbiB0aGlzIERDQy4gVGhlIG1lYXN1cmVtZW50IHJlc3VsdHMgYXJlIHZhbGlkIGF0IHRoZSB0aW1lIG9mIGNhbGlicmF0aW9uLiBUaGUgdXNlciBpcyByZXNwb25zaWJsZSBmb3IgYXJyYW5naW5nIGEgcmVjYWxpYnJhdGlvbiBpbiBkdWUgdGltZS48L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgIDwvZGNjOmRlY2xhcmF0aW9uPg0KICAgICAgICAgICAgPC9kY2M6c3RhdGVtZW50Pg0KDQogICAgICAgIDwvZGNjOnN0YXRlbWVudHM+DQoNCiAgICA8L2RjYzphZG1pbmlzdHJhdGl2ZURhdGE+DQoNCiAgICA8ZGNjOm1lYXN1cmVtZW50UmVzdWx0cz4NCiAgICAgICAgPGRjYzptZWFzdXJlbWVudFJlc3VsdCByZWZJZD0id2VpZ2h0QUJDMTIzNCI+DQoNCiAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+TWFzc2VrYWxpYnJpZXJ1bmc8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgPC9kY2M6bmFtZT4NCg0KICAgICAgICAgICAgPGRjYzp1c2VkTWV0aG9kcz4NCg0KICAgICAgICAgICAgICAgIDxkY2M6dXNlZE1ldGhvZCByZWZUeXBlPSJjb252ZW50aW9uYWxNYXNzIj4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5CZXN0aW1tdW5nIGRlcyBrb252ZW50aW9uZWxsZW4gV8OkZ2V3ZXJ0czwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPkRldGVybWluYXRpb24gb2YgdGhlIGNvbnZlbnRpb25hbCB3ZWlnaGluZyB2YWx1ZTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6bm9ybT5PSU1MIFIxMTEtMToyMDA0PC9kY2M6bm9ybT4NCiAgICAgICAgICAgICAgICA8L2RjYzp1c2VkTWV0aG9kPg0KDQogICAgICAgICAgICAgICAgPGRjYzp1c2VkTWV0aG9kIHJlZlR5cGU9Im1hc3MiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPlZlcndlbmRldGUgTWV0aG9kZSBkZXIgTWFzc2VrYWxpYnJpZXJ1bmc8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5Vc2VkIG1ldGhvZCBvZiBUcnVlIE1hc3MgY2FsaWJyYXRpb248L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5vcm0+T0lNTCBSMTExLTE6MjAwNDwvZGNjOm5vcm0+DQogICAgICAgICAgICAgICAgPC9kY2M6dXNlZE1ldGhvZD4NCg0KICAgICAgICAgICAgPC9kY2M6dXNlZE1ldGhvZHM+DQoNCiAgICAgICAgICAgIDxkY2M6aW5mbHVlbmNlQ29uZGl0aW9ucz4NCg0KICAgICAgICAgICAgICAgIDxkY2M6aW5mbHVlbmNlQ29uZGl0aW9uIHJlZlR5cGU9ImRlbnNpdHkiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkRpY2h0ZTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPkRlbnNpdHk8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOmRhdGE+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9InJlZmVyZW5jZWRWYWx1ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT44MDEwPC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XGtpbG9ncmFtXG1ldHJlXHRvdGhlKC0zKTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuY2VydGFpbnR5PjMwPC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dXNlZE1ldGhvZHM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6dXNlZE1ldGhvZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+TWV0aG9kIG9mIGRlbnNpdHkgZGV0ZXJtaW5hdGlvbjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpub3JtPk9JTUwgUjExMS0xOjIwMDQsIHNlY3Rpb24gQi4gbWV0aG9kIEY8L2RjYzpub3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzp1c2VkTWV0aG9kPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnVzZWRNZXRob2RzPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bWVhc3VyZW1lbnRNZXRhRGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzptZXRhRGF0YSByZWZUeXBlPSJzb3VyY2UiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpyZWZlcmVuY2U+Q2VydGlmaWNhdGUgWFhYWFggYnkgeXl5eSBkYXRlZCBZWVlZLU1NLUREPC9kY2M6cmVmZXJlbmNlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzptZXRhRGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzptZXRhRGF0YSByZWZUeXBlPSJjb25mb3JtaXR5Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bm9ybT5PSU1MIFIxMTEtMToyMDA0LCBzZWN0aW9uIEIuIG1ldGhvZCBGPC9kY2M6bm9ybT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50PlNpbXBsZSBhY2NlcHRhbmNlPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOmRlY2xhcmF0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb25mb3JtaXR5PnBhc3M8L2RjYzpjb25mb3JtaXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpkYXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibWF4aW11bVBlcm1pc3NpYmxlRXJyb3IiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4xMDwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5ca2lsb2dyYW1cbWV0cmVcdG90aGUoLTMpPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpkYXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzptZXRhRGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzptZWFzdXJlbWVudE1ldGFEYXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOmRhdGE+DQogICAgICAgICAgICAgICAgPC9kY2M6aW5mbHVlbmNlQ29uZGl0aW9uPg0KDQogICAgICAgICAgICAgICAgPGRjYzppbmZsdWVuY2VDb25kaXRpb24gcmVmVHlwZT0idGVtcGVyYXR1cmUiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPlRlbXBlcmF0dXI8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj50ZW1wZXJhdHVyZTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4yOTQuMDU8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5ca2VsdmluPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5jZXJ0YWludHk+MC41MDwvc2k6dW5jZXJ0YWludHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VGYWN0b3I+Mjwvc2k6Y292ZXJhZ2VGYWN0b3I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4wLjk1PC9zaTpjb3ZlcmFnZVByb2JhYmlsaXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpkYXRhPg0KICAgICAgICAgICAgICAgIDwvZGNjOmluZmx1ZW5jZUNvbmRpdGlvbj4NCg0KICAgICAgICAgICAgICAgIDxkY2M6aW5mbHVlbmNlQ29uZGl0aW9uIHJlZlR5cGU9ImFpckRlbnNpdHkiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPkx1ZnRkaWNodGU8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5haXIgZGVuc2l0eTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4xLjE2MzU8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5ca2lsb2dyYW1cbWV0cmVcdG90aGUoLTMpPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5jZXJ0YWludHk+MC4wMDM1PC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOmRhdGE+DQogICAgICAgICAgICAgICAgPC9kY2M6aW5mbHVlbmNlQ29uZGl0aW9uPg0KDQogICAgICAgICAgICAgICAgPGRjYzppbmZsdWVuY2VDb25kaXRpb24gcmVmVHlwZT0iaHVtaWRpdHkiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPnJlbC4gTHVmdGZldWNodGU8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5yZWxhdGl2ZSBodW1pZGl0eTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjQxNzwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxvbmU8L3NpOnVuaXQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjAyMDwvc2k6dW5jZXJ0YWludHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VGYWN0b3I+Mjwvc2k6Y292ZXJhZ2VGYWN0b3I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4wLjk1PC9zaTpjb3ZlcmFnZVByb2JhYmlsaXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpkYXRhPg0KICAgICAgICAgICAgICAgIDwvZGNjOmluZmx1ZW5jZUNvbmRpdGlvbj4NCg0KICAgICAgICAgICAgPC9kY2M6aW5mbHVlbmNlQ29uZGl0aW9ucz4NCg0KICAgICAgICAgICAgPGRjYzpyZXN1bHRzPg0KDQogICAgICAgICAgICAgICAgPGRjYzpyZXN1bHQgcmVmVHlwZT0iY29udmVudGlvbmFsTWFzcyI+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+S29udmVudGlvbmVsbGVyIFfDpGdld2VydDwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPkNvbnZlbnRpb25hbCBtYXNzPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgPGRjYzpkYXRhPg0KDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9Im5vbWluYWxWYWx1ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPk5lbm53ZXJ0PC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImVuIj5Ob21pbmFsIHZhbHVlPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dmFsdWU+Mjwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxraWxvZ3JhbTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9IkRpbWVuc2lvblVuaXQiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50Pk1hc3M8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4yPC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XGtpbG9ncmFtPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KDQoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJ4UmVmIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjEwMDAuNTMwMjAzNjYyNjgyNzwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxvbmU8L3NpOnVuaXQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpkYXRlVGltZT4yMDIzLTA2LTAxVDEyOjAxOjAyPC9zaTpkYXRlVGltZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuY2VydGFpbnR5PjEuOTQ2Nzg0NDk5NTQ2ODZFLTU8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9Im1lYXN1cmVtZW50VmFsdWUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50PlBUQjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjAuMjcwOTMzNTE1MDMzODI1NDY8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtZWFzdXJlbWVudFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5MTkU8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjM5Nzc5NjkyNTI0OTc2ODg0PC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XG9uZTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmRhdGVUaW1lPjIwMjEtMDYtMDFUMTI6MDE6MDI8L3NpOmRhdGVUaW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5jZXJ0YWludHk+MC4wPC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibWVhc3VyZW1lbnRWYWx1ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+VlRUPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dmFsdWU+MS4wODE0NTY1MjEzNzU5NTM3PC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XG9uZTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmRhdGVUaW1lPjIwMjEtMDYtMDFUMTI6MDE6MDI8L3NpOmRhdGVUaW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5jZXJ0YWludHk+MC4wPC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibWVhc3VyZW1lbnRWYWx1ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+Tk1JSjwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjAuODk3OTg4NTY5NzY5Njg0Mjwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxvbmU8L3NpOnVuaXQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpkYXRlVGltZT4yMDIxLTA2LTAxVDEyOjAxOjAyPC9zaTpkYXRlVGltZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuY2VydGFpbnR5PjAuMDwvc2k6dW5jZXJ0YWludHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VGYWN0b3I+Mjwvc2k6Y292ZXJhZ2VGYWN0b3I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4wLjk1PC9zaTpjb3ZlcmFnZVByb2JhYmlsaXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9Im1lYXN1cmVtZW50VmFsdWUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50PklNR0M8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjM3NDcyMTY3OTM4MDM5MjM2PC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XG9uZTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmRhdGVUaW1lPjIwMjEtMDYtMDFUMTI6MDE6MDI8L3NpOmRhdGVUaW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5jZXJ0YWludHk+MC4wPC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6cXVhbnRpdHk+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibWVhc3VyZW1lbnRWYWx1ZSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpuYW1lPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+S1JJU1M8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjI3NTk4MDQ1MTM1NTMyMTY8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtZWFzdXJlbWVudFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5NRVRBUzwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjAuMDc1MDI3MDM0NzU0NjIyMjU8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtZWFzdXJlbWVudFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5OUkM8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjc5NTAwODk1NTI3OTgyODQ8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtZWFzdXJlbWVudFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5DRU08L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4xLjA5NzE5NzA1MzcyMDgxNzY8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtZWFzdXJlbWVudFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5DRU5BTTwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjAuMzM4Nzc1NjY0OTU4NTcyNjwvc2k6dmFsdWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxvbmU8L3NpOnVuaXQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpkYXRlVGltZT4yMDIxLTA2LTAxVDEyOjAxOjAyPC9zaTpkYXRlVGltZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuY2VydGFpbnR5PjAuMDwvc2k6dW5jZXJ0YWludHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VGYWN0b3I+Mjwvc2k6Y292ZXJhZ2VGYWN0b3I+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4wLjk1PC9zaTpjb3ZlcmFnZVByb2JhYmlsaXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOmV4cGFuZGVkVW5jPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnF1YW50aXR5IHJlZlR5cGU9Im1lYXN1cmVtZW50VmFsdWUiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50Pk5JU1Q8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4wLjc2MDEwNDI5MTgxNzkwODY8L3NpOnZhbHVlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dW5pdD5cb25lPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjA8L3NpOnVuY2VydGFpbnR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlRmFjdG9yPjI8L3NpOmNvdmVyYWdlRmFjdG9yPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOmNvdmVyYWdlUHJvYmFiaWxpdHk+MC45NTwvc2k6Y292ZXJhZ2VQcm9iYWJpbGl0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpxdWFudGl0eT4NCg0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibWVhc3VyZW1lbnREZXZpYXRpb24iPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6dmFsdWU+MC4wMDAwMDAyPC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XGtpbG9ncmFtPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2k6ZGF0ZVRpbWU+MjAyMS0wNi0wMVQxMjowMTowMjwvc2k6ZGF0ZVRpbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpleHBhbmRlZFVuYz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bmNlcnRhaW50eT4wLjAwMDAwMDMyPC9zaTp1bmNlcnRhaW50eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZUZhY3Rvcj4yPC9zaTpjb3ZlcmFnZUZhY3Rvcj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpjb3ZlcmFnZVByb2JhYmlsaXR5PjAuOTU8L3NpOmNvdmVyYWdlUHJvYmFiaWxpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6ZXhwYW5kZWRVbmM+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6bWVhc3VyZW1lbnRNZXRhRGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzptZXRhRGF0YSByZWZUeXBlPSJpc0luQ01DIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cmVmZXJlbmNlPkQtSy14eHh4eC15eS16ejwvZGNjOnJlZmVyZW5jZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb250ZW50IGxhbmc9ImRlIj5EaWVzZXIgV2VydCBpc3QgaW5uZXJoYWxiIGRlciBLYWxpYnJpZXItIHVuZCBNZXNzbcO2Z2xpY2hrZWl0ZW4uPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPlRoaXMgcmVzdWx0IGlzIHdpdGhpbiB0aGUgY2FsaWJyYXRpb24gYW5kIG1lYXN1cmVtZW50IGNhcGFiaWxpdGllcy48L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOnZhbGlkPnRydWU8L2RjYzp2YWxpZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cmVzcEF1dGhvcml0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudD5EQWtrUzwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bmFtZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmVNYWlsPmluZm9AZGFra3MuZGU8L2RjYzplTWFpbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmxvY2F0aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNpdHk+QnJhdW5zY2h3ZWlnPC9kY2M6Y2l0eT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RjYzpsb2NhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnJlc3BBdXRob3JpdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm1ldGFEYXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm1ldGFEYXRhIHJlZlR5cGU9ImNvbmZvcm1pdHkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpjb252ZW50aW9uPnNlY3Rpb24gNS4zLjI8L2RjYzpjb252ZW50aW9uPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpub3JtPk9JTUwgUjExMS0xOjIwMDQ8L2RjYzpub3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpkZWNsYXJhdGlvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQ+QmluYXJ5LCBHdWFyZCBiYW5kZWQgYWNjZXB0YW5jZSB3PVUgYW5kIFRVUiA+PTM8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6ZGVjbGFyYXRpb24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbmZvcm1pdHk+cGFzczwvZGNjOmNvbmZvcm1pdHk+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmRhdGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRjYzpxdWFudGl0eSByZWZUeXBlPSJtYXhpbXVtUGVybWlzc2libGVFcnJvciI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnZhbHVlPjAuMDAwMDAxPC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp1bml0PlxraWxvZ3JhbTwvc2k6dW5pdD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zaTpyZWFsPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bWV0YURhdGE+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kY2M6bWVhc3VyZW1lbnRNZXRhRGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KICAgICAgICAgICAgICAgICAgICA8L2RjYzpkYXRhPg0KICAgICAgICAgICAgICAgIDwvZGNjOnJlc3VsdD4NCg0KICAgICAgICAgICAgICAgIDxkY2M6cmVzdWx0IHJlZlR5cGU9Im1hc3MiPg0KICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZGUiPk1hc3NlPC9kY2M6Y29udGVudD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJlbiI+TWFzczwvZGNjOmNvbnRlbnQ+DQogICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgIDxkY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6cXVhbnRpdHkgcmVmVHlwZT0ibm9taW5hbFZhbHVlIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkY2M6Y29udGVudCBsYW5nPSJkZSI+TmVubndlcnQ8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGNjOmNvbnRlbnQgbGFuZz0iZW4iPk5vbWluYWwgdmFsdWU8L2RjYzpjb250ZW50Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOm5hbWU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnJlYWw+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzaTp2YWx1ZT4yPC9zaTp2YWx1ZT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNpOnVuaXQ+XGtpbG9ncmFtPC9zaTp1bml0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2k6cmVhbD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGNjOnF1YW50aXR5Pg0KDQoNCiAgICAgICAgICAgICAgICAgICAgPC9kY2M6ZGF0YT4NCiAgICAgICAgICAgICAgICA8L2RjYzpyZXN1bHQ+DQogICAgICAgICAgICA8L2RjYzpyZXN1bHRzPg0KICAgICAgICA8L2RjYzptZWFzdXJlbWVudFJlc3VsdD4NCiAgICA8L2RjYzptZWFzdXJlbWVudFJlc3VsdHM+DQo8L2RjYzpkaWdpdGFsQ2FsaWJyYXRpb25DZXJ0aWZpY2F0ZT4=";
        byte[] data = DatatypeConverter.parseBase64Binary(base64);
        String path;
        path="src/main/resources/static/dccFiles/" + "file.xml";
        File file = new File(path);
        try {
            OutputStream outputStream = new BufferedOutputStream(new FileOutputStream(file));
            outputStream.write(data);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    @GetMapping("/download")
    public void keyComparison(HttpServletResponse response) throws IOException {
        File file = new File("src/main/resources/static/dccFiles/file.xml");
        response.setContentType("application/octet-stream");
        String headerKey = "Content Disposition";
        String headerValue = "attachment; filename=" + file.getName();
        response.setHeader(headerKey, headerValue);
        ServletOutputStream outputStream = response.getOutputStream();
        BufferedInputStream inputStream = new BufferedInputStream(new FileInputStream(file));
        byte[] buffer = new byte[8192];
        int bytesRead = -1;
        while ((bytesRead = inputStream.read(buffer)) != -1) {
            outputStream.write(buffer, 0, bytesRead);
        }
        inputStream.close();
        outputStream.close();
    }

    private List<FundamentalConstantDto> getConstantData() {
        List<FundamentalConstantDto> fundamentalConstantDtoList = new ArrayList<FundamentalConstantDto>();
        FundamentalConstantDto fundamentalConstantDto = new FundamentalConstantDto();

        fundamentalConstantService.getFundamentalConstantData().forEach(fundamentalConstant -> {
            fundamentalConstantDto.setPid(fundamentalConstant.getPid());
            fundamentalConstantDto.setBipmPID(fundamentalConstant.getBipmPID());
            fundamentalConstantDto.setdSIApproved(fundamentalConstant.getdSIApproved());
            ConstantDto constantDto = new ConstantDto();
            fundamentalConstantService.getConstantData().forEach(constant -> {
                constantDto.setLabel(constant.getLabel());
                constantDto.setQuantityType(constant.getQuantityType());
                constantDto.setValue(constant.getValue());
                constantDto.setUnit(constant.getUnit());
                constantDto.setDateTime(constant.getDateTime());
                constantDto.setUncertainty(constant.getUncertainty());
                constantDto.setDistribution(constant.getDistribution());
            });
            fundamentalConstantDto.setConstant(constantDto);
        });
        fundamentalConstantDtoList.add(fundamentalConstantDto);
        return fundamentalConstantDtoList;
    }
    @GetMapping("/getSiReals")
    public List<siReal> getSiReal(){
        return siReals;
    }
    @GetMapping("getExpandedUnc")
    public List<expandedUnc> getExpandedUnc(){
        List<expandedUnc> expUncs = new ArrayList<>();
        for(siReal real: siReals){
            expUncs.add(real.getExpUnc());
        }
        return expUncs;
    }
    @PostMapping("/keyComparison")
    public String keyComparison( @ModelAttribute JsonResponse response, @RequestBody JsonNode payload) throws ParserConfigurationException, IOException, SAXException, XPathExpressionException {
        File directory = new File("src/main/resources/static/dccFiles");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        String base64String = "";
        String pidreport = payload.get("keyComparisonData").get("pidReport").toString();
        for(File file: Objects.requireNonNull(directory.listFiles())){
            Document doc = db.parse(file);
            for(JsonNode participant: payload.get("keyComparisonData").get("participantList")){
                participant = participant.get("participant");
                if(Objects.equals(file.getName().substring(0,file.getName().length()-4), participant.get("pidDCC").toString().substring(1,participant.get("pidDCC").toString().length()-1))){
                    byte[] filecontent = Files.readAllBytes(file.toPath());
                    base64String  = Base64.getEncoder().encodeToString(filecontent);
                    XPath xPath =  XPathFactory.newInstance().newXPath();
                    String expression = "/digitalCalibrationCertificate/measurementResults/measurementResult/results/result/data/quantity[@refType=\"measurementValue\"]/real";
                    NodeList nodeList = (NodeList) xPath.compile(expression).evaluate(
                            doc, XPathConstants.NODESET);

                    for (int i = 0; i < nodeList.getLength(); i++) {
                        Node nNode = nodeList.item(i);
                        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
                            Element eElement = (Element) nNode;
                            Double value = Double.valueOf(eElement.getElementsByTagName("si:value").item(0).getTextContent());
                            String unit = eElement.getElementsByTagName("si:unit").item(0).getTextContent();
                            String dateTime = eElement.getElementsByTagName("si:dateTime").item(0).getTextContent();
                            Double uncertainty = Double.valueOf(eElement.getElementsByTagName("si:uncertainty").item(0).getTextContent());
                            int coverageFactor = Integer.parseInt(eElement.getElementsByTagName("si:coverageFactor").item(0).getTextContent());
                            Double coverageProbability = Double.valueOf(eElement.getElementsByTagName("si:coverageProbability").item(0).getTextContent());
                            siReals.add(new siReal(value,unit, dateTime, new expandedUnc(uncertainty, coverageFactor, coverageProbability)));
                        }
                    }
                }
            }
        }
        if (!Objects.equals(base64String, "")) {
            HashMap<String, String> fileMap = new HashMap<>();
            fileMap.put("base64File", base64String);
            fileMap.put("filename", pidreport);
            response = new JsonResponse("keyComparison", "200", fileMap);
        } else {
            response = new JsonResponse("keyComparison", "404", null);
        }
        return response.toString();
    }
}
